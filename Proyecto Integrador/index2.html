<!-- GET / -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="vendor/css/bootstrap.min.css">
    <link rel="stylesheet" href="resources/css/style.css">
</head>

<body>

    <div class="container">
        <header>
            <h1>Tienda</h1>
        </header>

        <main id="view"></main>
    </div>

    <!--Libs-->
    <script src="vendor/js/handlebars.min.js"></script>

    <script>
        function HomePage() {
            const page = Handlebars.compile(`<div class="index-page">
    
    <form id="search-form">
        <div>
            <span>Nombre</span>
            <input type="search" id="search-box" class="form-control">
        </div>
        <div>
            Ordenar por
            <select name="orderBy" id="orderBy" class="form-control">
                <option value="nada">-</option>
                <option value="mayorPrecio">Mayor precio</option>
                <option value="menorPrecio">Menor precio</option>
            </select>
        </div>

        <button class="btn">Buscar</button>
    </form>

    <div class="article-list">

        {{#each articulos}}
        <div class="article" data-id="{{this.id}}">
            <div class="image" style="background-image: url({{this.urlImagen}});"></div>
            <div class="content">
                <div class="article-title">{{this.nombre}}</div>
                <div class="article-price">
                    <span class="article-price-currency">$</span>
                    <span class="article-price-value">{{this.precio}}</span>
                </div>
            </div>
        </div>
        {{/each}}

    </div>

</div>`);


            document.getElementById("view").innerHTML = page({
                articulos,
            });

            document.getElementById('orderBy').addEventListener('change', (e) => {
                switch (e.target.value) {
                    case 'mayorPrecio':
                        articulos = articulos.sort((a, b) =>
                            Number(a.precio) < Number(b.precio) ? 1 : -1
                        )
                        break;
                    case 'menorPrecio':
                        articulos = articulos.sort((a, b) =>
                            Number(a.precio) > Number(b.precio) ? 1 : -1
                        )
                        break;
                }

                document.getElementById("view").innerHTML = page({
                    articulos,
                });
            });

        }

        HomePage();
    </script>
</body>

</html>